<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Module: Addressable::IDNA</title>

	<link rel="stylesheet" href="../rdoc.css" type="text/css" media="screen" />

	<script src="../js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="module">

	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../index.html">Home</a>
          <a href="../index.html#classes">Classes</a>
          <a href="../index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="../lib/addressable/idna/native_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/addressable/idna/native.rb">lib/addressable/idna/native.rb</a></li>
					
						<li><a href="../lib/addressable/idna/pure_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/addressable/idna/pure.rb">lib/addressable/idna/pure.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			

			<!-- Namespace Contents -->
			
			<div id="namespace-list-section" class="section">
				<h3 class="section-header">Namespace</h3>
				<ul class="link-list">
					
					<li><span class="type">CLASS</span> <a href="IDNA/PunycodeBadInput.html">Addressable::IDNA::PunycodeBadInput</a></li>
					
					<li><span class="type">CLASS</span> <a href="IDNA/PunycodeBigOutput.html">Addressable::IDNA::PunycodeBigOutput</a></li>
					
					<li><span class="type">CLASS</span> <a href="IDNA/PunycodeOverflow.html">Addressable::IDNA::PunycodeOverflow</a></li>
					
				</ul>
			</div>
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#method-c-lookup_unicode_combining_class">::lookup_unicode_combining_class</a></li>
					
					<li><a href="#method-c-lookup_unicode_compatibility">::lookup_unicode_compatibility</a></li>
					
					<li><a href="#method-c-lookup_unicode_composition">::lookup_unicode_composition</a></li>
					
					<li><a href="#method-c-lookup_unicode_lowercase">::lookup_unicode_lowercase</a></li>
					
					<li><a href="#method-c-punycode_adapt">::punycode_adapt</a></li>
					
					<li><a href="#method-c-punycode_basic%3F">::punycode_basic?</a></li>
					
					<li><a href="#method-c-punycode_decode">::punycode_decode</a></li>
					
					<li><a href="#method-c-punycode_decode">::punycode_decode</a></li>
					
					<li><a href="#method-c-punycode_decode_digit">::punycode_decode_digit</a></li>
					
					<li><a href="#method-c-punycode_delimiter%3F">::punycode_delimiter?</a></li>
					
					<li><a href="#method-c-punycode_encode">::punycode_encode</a></li>
					
					<li><a href="#method-c-punycode_encode">::punycode_encode</a></li>
					
					<li><a href="#method-c-punycode_encode_digit">::punycode_encode_digit</a></li>
					
					<li><a href="#method-c-to_ascii">::to_ascii</a></li>
					
					<li><a href="#method-c-to_ascii">::to_ascii</a></li>
					
					<li><a href="#method-c-to_unicode">::to_unicode</a></li>
					
					<li><a href="#method-c-to_unicode">::to_unicode</a></li>
					
					<li><a href="#method-c-unicode_compose">::unicode_compose</a></li>
					
					<li><a href="#method-c-unicode_compose_pair">::unicode_compose_pair</a></li>
					
					<li><a href="#method-c-unicode_decompose">::unicode_decompose</a></li>
					
					<li><a href="#method-c-unicode_decompose_hangul">::unicode_decompose_hangul</a></li>
					
					<li><a href="#method-c-unicode_downcase">::unicode_downcase</a></li>
					
					<li><a href="#method-c-unicode_normalize_kc">::unicode_normalize_kc</a></li>
					
					<li><a href="#method-c-unicode_normalize_kc">::unicode_normalize_kc</a></li>
					
					<li><a href="#method-c-unicode_sort_canonical">::unicode_sort_canonical</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
		</div>

		<div id="project-metadata">
			
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="../images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="../Addressable.html">Addressable</a></li>
				
					<li><a href="../Addressable/IDNA.html">Addressable::IDNA</a></li>
				
					<li><a href="../Addressable/IDNA/PunycodeBadInput.html">Addressable::IDNA::PunycodeBadInput</a></li>
				
					<li><a href="../Addressable/IDNA/PunycodeBigOutput.html">Addressable::IDNA::PunycodeBigOutput</a></li>
				
					<li><a href="../Addressable/IDNA/PunycodeOverflow.html">Addressable::IDNA::PunycodeOverflow</a></li>
				
					<li><a href="../Addressable/Template.html">Addressable::Template</a></li>
				
					<li><a href="../Addressable/Template/InvalidTemplateOperatorError.html">Addressable::Template::InvalidTemplateOperatorError</a></li>
				
					<li><a href="../Addressable/Template/InvalidTemplateValueError.html">Addressable::Template::InvalidTemplateValueError</a></li>
				
					<li><a href="../Addressable/Template/MatchData.html">Addressable::Template::MatchData</a></li>
				
					<li><a href="../Addressable/Template/TemplateOperatorAbortedError.html">Addressable::Template::TemplateOperatorAbortedError</a></li>
				
					<li><a href="../Addressable/URI.html">Addressable::URI</a></li>
				
					<li><a href="../Addressable/URI/CharacterClasses.html">Addressable::URI::CharacterClasses</a></li>
				
					<li><a href="../Addressable/URI/InvalidURIError.html">Addressable::URI::InvalidURIError</a></li>
				
					<li><a href="../Addressable/VERSION.html">Addressable::VERSION</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="module">Addressable::IDNA</h1>

		<div id="description">
			
		</div>

		<!-- Constants -->
		
		<div id="constants-list" class="section">
			<h3 class="section-header">Constants</h3>
			<dl>
			
				<dt><a name="ACE_PREFIX">ACE_PREFIX</a></dt>
				
				<dd class="description"><p>
This module is loosely based on idn_actionmailer by Mick Staugaard, the
unicode library by Yoshida Masato, and the punycode implementation by
Kazuhiro Nishiyama.  Most of the code was copied verbatim, but some
reformatting was done, and some translation from C was done.
</p>
<p>
Without their code to work from as a base, we&#8217;d all still be relying
on the presence of libidn.  Which nobody ever seems to have installed.
</p>
<p>
Original sources: <a
href="http://github.com/staugaard/idn_actionmailer">github.com/staugaard/idn_actionmailer</a>
<a
href="http://www.yoshidam.net/Ruby.html#unicode">www.yoshidam.net/Ruby.html#unicode</a>
<a
href="http://rubyforge.org/frs/?group_id=2550">rubyforge.org/frs/?group_id=2550</a>
</p></dd>
				
			
				<dt><a name="UTF8_REGEX">UTF8_REGEX</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="UTF8_REGEX_MULTIBYTE">UTF8_REGEX_MULTIBYTE</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="HANGUL_SBASE">HANGUL_SBASE</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="HANGUL_LBASE">HANGUL_LBASE</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="HANGUL_LCOUNT">HANGUL_LCOUNT</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="HANGUL_VBASE">HANGUL_VBASE</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="HANGUL_VCOUNT">HANGUL_VCOUNT</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="HANGUL_TBASE">HANGUL_TBASE</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="HANGUL_TCOUNT">HANGUL_TCOUNT</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="HANGUL_NCOUNT">HANGUL_NCOUNT</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="HANGUL_SCOUNT">HANGUL_SCOUNT</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="UNICODE_DATA_COMBINING_CLASS">UNICODE_DATA_COMBINING_CLASS</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="UNICODE_DATA_EXCLUSION">UNICODE_DATA_EXCLUSION</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="UNICODE_DATA_CANONICAL">UNICODE_DATA_CANONICAL</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="UNICODE_DATA_COMPATIBILITY">UNICODE_DATA_COMPATIBILITY</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="UNICODE_DATA_UPPERCASE">UNICODE_DATA_UPPERCASE</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="UNICODE_DATA_LOWERCASE">UNICODE_DATA_LOWERCASE</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="UNICODE_DATA_TITLECASE">UNICODE_DATA_TITLECASE</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="UNICODE_DATA">UNICODE_DATA</a></dt>
				
				<dd class="description"><p>
This is a sparse Unicode table.  Codepoints without entries are assumed to
have the value: [0, 0, nil, nil, nil, nil, nil]
</p></dd>
				
			
				<dt><a name="COMPOSITION_TABLE">COMPOSITION_TABLE</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="UNICODE_MAX_LENGTH">UNICODE_MAX_LENGTH</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="ACE_MAX_LENGTH">ACE_MAX_LENGTH</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="PUNYCODE_BASE">PUNYCODE_BASE</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="PUNYCODE_TMIN">PUNYCODE_TMIN</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="PUNYCODE_TMAX">PUNYCODE_TMAX</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="PUNYCODE_SKEW">PUNYCODE_SKEW</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="PUNYCODE_DAMP">PUNYCODE_DAMP</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="PUNYCODE_INITIAL_BIAS">PUNYCODE_INITIAL_BIAS</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="PUNYCODE_INITIAL_N">PUNYCODE_INITIAL_N</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="PUNYCODE_DELIMITER">PUNYCODE_DELIMITER</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="PUNYCODE_MAXINT">PUNYCODE_MAXINT</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="PUNYCODE_PRINT_ASCII">PUNYCODE_PRINT_ASCII</a></dt>
				
				<dd class="description"></dd>
				
			
			</dl>
		</div>
		

		<!-- Attributes -->
		

		<!-- Methods -->
		
		<div id="public-class-method-details" class="method-section section">
			<h3 class="section-header">Public Class Methods</h3>

		
			<div id="to-ascii-method" class="method-detail ">
				<a name="method-c-to_ascii"></a>

				<div class="method-heading">
				
					<span class="method-name">to_ascii</span><span
						class="method-args">(input)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Converts from a Unicode internationalized domain name to an ASCII domain
name as described in RFC 3490.
</p>
					

					
					<div class="method-source-code"
						id="to-ascii-source">
<pre>
    <span class="ruby-comment cmt"># File lib/addressable/idna/pure.rb, line 62</span>
62:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">to_ascii</span>(<span class="ruby-identifier">input</span>)
63:       <span class="ruby-identifier">input</span> = <span class="ruby-identifier">input</span>.<span class="ruby-identifier">dup</span>
64:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">input</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:force_encoding</span>)
65:         <span class="ruby-identifier">input</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">ASCII_8BIT</span>)
66:       <span class="ruby-keyword kw">end</span>
67:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">input</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">UTF8_REGEX</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">input</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">UTF8_REGEX_MULTIBYTE</span>
68:         <span class="ruby-identifier">parts</span> = <span class="ruby-identifier">unicode_downcase</span>(<span class="ruby-identifier">input</span>).<span class="ruby-identifier">split</span>(<span class="ruby-value str">'.'</span>)
69:         <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">map!</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">part</span><span class="ruby-operator">|</span>
70:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">part</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:force_encoding</span>)
71:             <span class="ruby-identifier">part</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">ASCII_8BIT</span>)
72:           <span class="ruby-keyword kw">end</span>
73:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">part</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">UTF8_REGEX</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">part</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">UTF8_REGEX_MULTIBYTE</span>
74:             <span class="ruby-constant">ACE_PREFIX</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">punycode_encode</span>(<span class="ruby-identifier">unicode_normalize_kc</span>(<span class="ruby-identifier">part</span>))
75:           <span class="ruby-keyword kw">else</span>
76:             <span class="ruby-identifier">part</span>
77:           <span class="ruby-keyword kw">end</span>
78:         <span class="ruby-keyword kw">end</span>
79:         <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">'.'</span>)
80:       <span class="ruby-keyword kw">else</span>
81:         <span class="ruby-identifier">input</span>
82:       <span class="ruby-keyword kw">end</span>
83:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="to-ascii-method" class="method-detail ">
				<a name="method-c-to_ascii"></a>

				<div class="method-heading">
				
					<span class="method-name">to_ascii</span><span
						class="method-args">(value)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="to-ascii-source">
<pre>
    <span class="ruby-comment cmt"># File lib/addressable/idna/native.rb, line 35</span>
35:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">to_ascii</span>(<span class="ruby-identifier">value</span>)
36:       <span class="ruby-constant">IDN</span><span class="ruby-operator">::</span><span class="ruby-constant">Idna</span>.<span class="ruby-identifier">toASCII</span>(<span class="ruby-identifier">value</span>)
37:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="to-unicode-method" class="method-detail ">
				<a name="method-c-to_unicode"></a>

				<div class="method-heading">
				
					<span class="method-name">to_unicode</span><span
						class="method-args">(value)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="to-unicode-source">
<pre>
    <span class="ruby-comment cmt"># File lib/addressable/idna/native.rb, line 39</span>
39:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">to_unicode</span>(<span class="ruby-identifier">value</span>)
40:       <span class="ruby-constant">IDN</span><span class="ruby-operator">::</span><span class="ruby-constant">Idna</span>.<span class="ruby-identifier">toUnicode</span>(<span class="ruby-identifier">value</span>)
41:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="to-unicode-method" class="method-detail ">
				<a name="method-c-to_unicode"></a>

				<div class="method-heading">
				
					<span class="method-name">to_unicode</span><span
						class="method-args">(input)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Converts from an ASCII domain name to a Unicode internationalized domain
name as described in RFC 3490.
</p>
					

					
					<div class="method-source-code"
						id="to-unicode-source">
<pre>
     <span class="ruby-comment cmt"># File lib/addressable/idna/pure.rb, line 87</span>
 87:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">to_unicode</span>(<span class="ruby-identifier">input</span>)
 88:       <span class="ruby-identifier">parts</span> = <span class="ruby-identifier">input</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'.'</span>)
 89:       <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">map!</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">part</span><span class="ruby-operator">|</span>
 90:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">part</span> <span class="ruby-operator">=~</span> <span class="ruby-node">/^#{ACE_PREFIX}/</span>
 91:           <span class="ruby-identifier">punycode_decode</span>(<span class="ruby-identifier">part</span>[<span class="ruby-node">/^#{ACE_PREFIX}(.+)/</span>, <span class="ruby-value">1</span>])
 92:         <span class="ruby-keyword kw">else</span>
 93:           <span class="ruby-identifier">part</span>
 94:         <span class="ruby-keyword kw">end</span>
 95:       <span class="ruby-keyword kw">end</span>
 96:       <span class="ruby-identifier">output</span> = <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">'.'</span>)
 97:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">output</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:force_encoding</span>)
 98:         <span class="ruby-identifier">output</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>)
 99:       <span class="ruby-keyword kw">end</span>
100:       <span class="ruby-identifier">output</span>
101:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="unicode-normalize-kc-method" class="method-detail ">
				<a name="method-c-unicode_normalize_kc"></a>

				<div class="method-heading">
				
					<span class="method-name">unicode_normalize_kc</span><span
						class="method-args">(input)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Unicode normalization form KC.
</p>
					

					
					<div class="method-source-code"
						id="unicode-normalize-kc-source">
<pre>
     <span class="ruby-comment cmt"># File lib/addressable/idna/pure.rb, line 104</span>
104:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unicode_normalize_kc</span>(<span class="ruby-identifier">input</span>)
105:       <span class="ruby-identifier">unpacked</span> = <span class="ruby-identifier">input</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-value str">&quot;U*&quot;</span>)
106:       <span class="ruby-identifier">unpacked</span> =
107:         <span class="ruby-identifier">unicode_compose</span>(<span class="ruby-identifier">unicode_sort_canonical</span>(<span class="ruby-identifier">unicode_decompose</span>(<span class="ruby-identifier">unpacked</span>)))
108:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">unpacked</span>.<span class="ruby-identifier">pack</span>(<span class="ruby-value str">&quot;U*&quot;</span>)
109:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="unicode-normalize-kc-method" class="method-detail ">
				<a name="method-c-unicode_normalize_kc"></a>

				<div class="method-heading">
				
					<span class="method-name">unicode_normalize_kc</span><span
						class="method-args">(value)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="unicode-normalize-kc-source">
<pre>
    <span class="ruby-comment cmt"># File lib/addressable/idna/native.rb, line 31</span>
31:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unicode_normalize_kc</span>(<span class="ruby-identifier">value</span>)
32:       <span class="ruby-constant">IDN</span><span class="ruby-operator">::</span><span class="ruby-constant">Stringprep</span>.<span class="ruby-identifier">nfkc_normalize</span>(<span class="ruby-identifier">value</span>)
33:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	
		<div id="private-class-method-details" class="method-section section">
			<h3 class="section-header">Private Class Methods</h3>

		
			<div id="lookup-unicode-combining-class-method" class="method-detail ">
				<a name="method-c-lookup_unicode_combining_class"></a>

				<div class="method-heading">
				
					<span class="method-name">lookup_unicode_combining_class</span><span
						class="method-args">(codepoint)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="lookup-unicode-combining-class-source">
<pre>
     <span class="ruby-comment cmt"># File lib/addressable/idna/pure.rb, line 270</span>
270:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">lookup_unicode_combining_class</span>(<span class="ruby-identifier">codepoint</span>)
271:       <span class="ruby-identifier">codepoint_data</span> = <span class="ruby-constant">UNICODE_DATA</span>[<span class="ruby-identifier">codepoint</span>]
272:       (<span class="ruby-identifier">codepoint_data</span> <span class="ruby-operator">?</span>
273:         (<span class="ruby-identifier">codepoint_data</span>[<span class="ruby-constant">UNICODE_DATA_COMBINING_CLASS</span>] <span class="ruby-operator">||</span> <span class="ruby-value">0</span>) <span class="ruby-operator">:</span>
274:         <span class="ruby-value">0</span>)
275:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="lookup-unicode-compatibility-method" class="method-detail ">
				<a name="method-c-lookup_unicode_compatibility"></a>

				<div class="method-heading">
				
					<span class="method-name">lookup_unicode_compatibility</span><span
						class="method-args">(codepoint)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="lookup-unicode-compatibility-source">
<pre>
     <span class="ruby-comment cmt"># File lib/addressable/idna/pure.rb, line 278</span>
278:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">lookup_unicode_compatibility</span>(<span class="ruby-identifier">codepoint</span>)
279:       <span class="ruby-identifier">codepoint_data</span> = <span class="ruby-constant">UNICODE_DATA</span>[<span class="ruby-identifier">codepoint</span>]
280:       (<span class="ruby-identifier">codepoint_data</span> <span class="ruby-operator">?</span>
281:         <span class="ruby-identifier">codepoint_data</span>[<span class="ruby-constant">UNICODE_DATA_COMPATIBILITY</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>)
282:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="lookup-unicode-composition-method" class="method-detail ">
				<a name="method-c-lookup_unicode_composition"></a>

				<div class="method-heading">
				
					<span class="method-name">lookup_unicode_composition</span><span
						class="method-args">(unpacked)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="lookup-unicode-composition-source">
<pre>
     <span class="ruby-comment cmt"># File lib/addressable/idna/pure.rb, line 293</span>
293:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">lookup_unicode_composition</span>(<span class="ruby-identifier">unpacked</span>)
294:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">COMPOSITION_TABLE</span>[<span class="ruby-identifier">unpacked</span>]
295:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="lookup-unicode-lowercase-method" class="method-detail ">
				<a name="method-c-lookup_unicode_lowercase"></a>

				<div class="method-heading">
				
					<span class="method-name">lookup_unicode_lowercase</span><span
						class="method-args">(codepoint)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="lookup-unicode-lowercase-source">
<pre>
     <span class="ruby-comment cmt"># File lib/addressable/idna/pure.rb, line 285</span>
285:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">lookup_unicode_lowercase</span>(<span class="ruby-identifier">codepoint</span>)
286:       <span class="ruby-identifier">codepoint_data</span> = <span class="ruby-constant">UNICODE_DATA</span>[<span class="ruby-identifier">codepoint</span>]
287:       (<span class="ruby-identifier">codepoint_data</span> <span class="ruby-operator">?</span>
288:         (<span class="ruby-identifier">codepoint_data</span>[<span class="ruby-constant">UNICODE_DATA_LOWERCASE</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">codepoint</span>) <span class="ruby-operator">:</span>
289:         <span class="ruby-identifier">codepoint</span>)
290:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="punycode-adapt-method" class="method-detail ">
				<a name="method-c-punycode_adapt"></a>

				<div class="method-heading">
				
					<span class="method-name">punycode_adapt</span><span
						class="method-args">(delta, numpoints, firsttime)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Bias adaptation method
</p>
					

					
					<div class="method-source-code"
						id="punycode-adapt-source">
<pre>
      <span class="ruby-comment cmt"># File lib/addressable/idna/pure.rb, line 4869</span>
4869:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">punycode_adapt</span>(<span class="ruby-identifier">delta</span>, <span class="ruby-identifier">numpoints</span>, <span class="ruby-identifier">firsttime</span>)
4870:       <span class="ruby-identifier">delta</span> = <span class="ruby-identifier">firsttime</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">delta</span> <span class="ruby-operator">/</span> <span class="ruby-constant">PUNYCODE_DAMP</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">delta</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">1</span>
4871:       <span class="ruby-comment cmt"># delta &gt;&gt; 1 is a faster way of doing delta / 2</span>
4872:       <span class="ruby-identifier">delta</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">delta</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">numpoints</span>
4873:       <span class="ruby-identifier">difference</span> = <span class="ruby-constant">PUNYCODE_BASE</span> <span class="ruby-operator">-</span> <span class="ruby-constant">PUNYCODE_TMIN</span>
4874: 
4875:       <span class="ruby-identifier">k</span> = <span class="ruby-value">0</span>
4876:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">delta</span> <span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">difference</span> * <span class="ruby-constant">PUNYCODE_TMAX</span>) <span class="ruby-operator">/</span> <span class="ruby-value">2</span>
4877:         <span class="ruby-identifier">delta</span> <span class="ruby-operator">/=</span> <span class="ruby-identifier">difference</span>
4878:         <span class="ruby-identifier">k</span> <span class="ruby-operator">+=</span> <span class="ruby-constant">PUNYCODE_BASE</span>
4879:       <span class="ruby-keyword kw">end</span>
4880: 
4881:       <span class="ruby-identifier">k</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">difference</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) * <span class="ruby-identifier">delta</span> <span class="ruby-operator">/</span> (<span class="ruby-identifier">delta</span> <span class="ruby-operator">+</span> <span class="ruby-constant">PUNYCODE_SKEW</span>)
4882:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="punycode-basic--method" class="method-detail ">
				<a name="method-c-punycode_basic%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">punycode_basic?</span><span
						class="method-args">(codepoint)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="punycode-basic--source">
<pre>
      <span class="ruby-comment cmt"># File lib/addressable/idna/pure.rb, line 4837</span>
4837:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">punycode_basic?</span>(<span class="ruby-identifier">codepoint</span>)
4838:       <span class="ruby-identifier">codepoint</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0x80</span>
4839:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="punycode-decode-method" class="method-detail ">
				<a name="method-c-punycode_decode"></a>

				<div class="method-heading">
				
					<span class="method-name">punycode_decode</span><span
						class="method-args">(value)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="punycode-decode-source">
<pre>
    <span class="ruby-comment cmt"># File lib/addressable/idna/native.rb, line 27</span>
27:      <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">punycode_decode</span>(<span class="ruby-identifier">value</span>)
28:        <span class="ruby-constant">IDN</span><span class="ruby-operator">::</span><span class="ruby-constant">Punycode</span>.<span class="ruby-identifier">decode</span>(<span class="ruby-identifier">value</span>)
29:      <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="punycode-decode-method" class="method-detail ">
				<a name="method-c-punycode_decode"></a>

				<div class="method-heading">
				
					<span class="method-name">punycode_decode</span><span
						class="method-args">(punycode)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="punycode-decode-source">
<pre>
      <span class="ruby-comment cmt"># File lib/addressable/idna/pure.rb, line 4715</span>
4715:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">punycode_decode</span>(<span class="ruby-identifier">punycode</span>)
4716:       <span class="ruby-identifier">input</span> = []
4717:       <span class="ruby-identifier">output</span> = []
4718: 
4719:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ACE_MAX_LENGTH</span> * <span class="ruby-value">2</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">punycode</span>.<span class="ruby-identifier">size</span>
4720:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">PunycodeBigOutput</span>, <span class="ruby-value str">&quot;Output would exceed the space provided.&quot;</span>
4721:       <span class="ruby-keyword kw">end</span>
4722:       <span class="ruby-identifier">punycode</span>.<span class="ruby-identifier">each_byte</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
4723:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">127</span>
4724:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">PunycodeBadInput</span>, <span class="ruby-value str">&quot;Input is invalid.&quot;</span>
4725:         <span class="ruby-keyword kw">end</span>
4726:         <span class="ruby-identifier">input</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">c</span>)
4727:       <span class="ruby-keyword kw">end</span>
4728: 
4729:       <span class="ruby-identifier">input_length</span> = <span class="ruby-identifier">input</span>.<span class="ruby-identifier">length</span>
4730:       <span class="ruby-identifier">output_length</span> = [<span class="ruby-constant">UNICODE_MAX_LENGTH</span>]
4731: 
4732:       <span class="ruby-comment cmt"># Initialize the state</span>
4733:       <span class="ruby-identifier">n</span> = <span class="ruby-constant">PUNYCODE_INITIAL_N</span>
4734: 
4735:       <span class="ruby-identifier">out</span> = <span class="ruby-identifier">i</span> = <span class="ruby-value">0</span>
4736:       <span class="ruby-identifier">max_out</span> = <span class="ruby-identifier">output_length</span>[<span class="ruby-value">0</span>]
4737:       <span class="ruby-identifier">bias</span> = <span class="ruby-constant">PUNYCODE_INITIAL_BIAS</span>
4738: 
4739:       <span class="ruby-comment cmt"># Handle the basic code points:  Let b be the number of input code</span>
4740:       <span class="ruby-comment cmt"># points before the last delimiter, or 0 if there is none, then</span>
4741:       <span class="ruby-comment cmt"># copy the first b code points to the output.</span>
4742: 
4743:       <span class="ruby-identifier">b</span> = <span class="ruby-value">0</span>
4744:       <span class="ruby-identifier">input_length</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">j</span><span class="ruby-operator">|</span>
4745:         <span class="ruby-identifier">b</span> = <span class="ruby-identifier">j</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">punycode_delimiter?</span>(<span class="ruby-identifier">input</span>[<span class="ruby-identifier">j</span>])
4746:       <span class="ruby-keyword kw">end</span>
4747:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">b</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">max_out</span>
4748:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">PunycodeBigOutput</span>, <span class="ruby-value str">&quot;Output would exceed the space provided.&quot;</span>
4749:       <span class="ruby-keyword kw">end</span>
4750: 
4751:       <span class="ruby-identifier">b</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">j</span><span class="ruby-operator">|</span>
4752:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">punycode_basic?</span>(<span class="ruby-identifier">input</span>[<span class="ruby-identifier">j</span>])
4753:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">PunycodeBadInput</span>, <span class="ruby-value str">&quot;Input is invalid.&quot;</span>
4754:         <span class="ruby-keyword kw">end</span>
4755:         <span class="ruby-identifier">output</span>[<span class="ruby-identifier">out</span>] = <span class="ruby-identifier">input</span>[<span class="ruby-identifier">j</span>]
4756:         <span class="ruby-identifier">out</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>
4757:       <span class="ruby-keyword kw">end</span>
4758: 
4759:       <span class="ruby-comment cmt"># Main decoding loop:  Start just after the last delimiter if any</span>
4760:       <span class="ruby-comment cmt"># basic code points were copied; start at the beginning otherwise.</span>
4761: 
4762:       <span class="ruby-identifier">in_</span> = <span class="ruby-identifier">b</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">b</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
4763:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">in_</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">input_length</span>
4764: 
4765:         <span class="ruby-comment cmt"># in_ is the index of the next character to be consumed, and</span>
4766:         <span class="ruby-comment cmt"># out is the number of code points in the output array.</span>
4767: 
4768:         <span class="ruby-comment cmt"># Decode a generalized variable-length integer into delta,</span>
4769:         <span class="ruby-comment cmt"># which gets added to i.  The overflow checking is easier</span>
4770:         <span class="ruby-comment cmt"># if we increase i as we go, then subtract off its starting</span>
4771:         <span class="ruby-comment cmt"># value at the end to obtain delta.</span>
4772: 
4773:         <span class="ruby-identifier">oldi</span> = <span class="ruby-identifier">i</span>; <span class="ruby-identifier">w</span> = <span class="ruby-value">1</span>; <span class="ruby-identifier">k</span> = <span class="ruby-constant">PUNYCODE_BASE</span>
4774:         <span class="ruby-keyword kw">while</span> <span class="ruby-keyword kw">true</span>
4775:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">in_</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">input_length</span>
4776:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">PunycodeBadInput</span>, <span class="ruby-value str">&quot;Input is invalid.&quot;</span>
4777:           <span class="ruby-keyword kw">end</span>
4778:           <span class="ruby-identifier">digit</span> = <span class="ruby-identifier">punycode_decode_digit</span>(<span class="ruby-identifier">input</span>[<span class="ruby-identifier">in_</span>])
4779:           <span class="ruby-identifier">in_</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>
4780:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">digit</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-constant">PUNYCODE_BASE</span>
4781:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">PunycodeBadInput</span>, <span class="ruby-value str">&quot;Input is invalid.&quot;</span>
4782:           <span class="ruby-keyword kw">end</span>
4783:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">digit</span> <span class="ruby-operator">&gt;</span> (<span class="ruby-constant">PUNYCODE_MAXINT</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">i</span>) <span class="ruby-operator">/</span> <span class="ruby-identifier">w</span>
4784:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">PunycodeOverflow</span>, <span class="ruby-value str">&quot;Input needs wider integers to process.&quot;</span>
4785:           <span class="ruby-keyword kw">end</span>
4786:           <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">digit</span> * <span class="ruby-identifier">w</span>
4787:           <span class="ruby-identifier">t</span> = (
4788:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">bias</span>
4789:               <span class="ruby-constant">PUNYCODE_TMIN</span>
4790:             <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">bias</span> <span class="ruby-operator">+</span> <span class="ruby-constant">PUNYCODE_TMAX</span>
4791:               <span class="ruby-constant">PUNYCODE_TMAX</span>
4792:             <span class="ruby-keyword kw">else</span>
4793:               <span class="ruby-identifier">k</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">bias</span>
4794:             <span class="ruby-keyword kw">end</span>
4795:           )
4796:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">digit</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">t</span>
4797:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">w</span> <span class="ruby-operator">&gt;</span> <span class="ruby-constant">PUNYCODE_MAXINT</span> <span class="ruby-operator">/</span> (<span class="ruby-constant">PUNYCODE_BASE</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">t</span>)
4798:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">PunycodeOverflow</span>, <span class="ruby-value str">&quot;Input needs wider integers to process.&quot;</span>
4799:           <span class="ruby-keyword kw">end</span>
4800:           <span class="ruby-identifier">w</span> <span class="ruby-operator">*=</span> <span class="ruby-constant">PUNYCODE_BASE</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">t</span>
4801:           <span class="ruby-identifier">k</span> <span class="ruby-operator">+=</span> <span class="ruby-constant">PUNYCODE_BASE</span>
4802:         <span class="ruby-keyword kw">end</span>
4803: 
4804:         <span class="ruby-identifier">bias</span> = <span class="ruby-identifier">punycode_adapt</span>(<span class="ruby-identifier">i</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">oldi</span>, <span class="ruby-identifier">out</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">oldi</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>)
4805: 
4806:         <span class="ruby-comment cmt"># I was supposed to wrap around from out + 1 to 0,</span>
4807:         <span class="ruby-comment cmt"># incrementing n each time, so we'll fix that now:</span>
4808: 
4809:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">/</span> (<span class="ruby-identifier">out</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-operator">&gt;</span> <span class="ruby-constant">PUNYCODE_MAXINT</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">n</span>
4810:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">PunycodeOverflow</span>, <span class="ruby-value str">&quot;Input needs wider integers to process.&quot;</span>
4811:         <span class="ruby-keyword kw">end</span>
4812:         <span class="ruby-identifier">n</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">/</span> (<span class="ruby-identifier">out</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
4813:         <span class="ruby-identifier">i</span> <span class="ruby-operator">=</span> <span class="ruby-identifier">out</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
4814: 
4815:         <span class="ruby-comment cmt"># Insert n at position i of the output:</span>
4816: 
4817:         <span class="ruby-comment cmt"># not needed for Punycode:</span>
4818:         <span class="ruby-comment cmt"># raise PUNYCODE_INVALID_INPUT if decode_digit(n) &lt;= base</span>
4819:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">out</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">max_out</span>
4820:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">PunycodeBigOutput</span>, <span class="ruby-value str">&quot;Output would exceed the space provided.&quot;</span>
4821:         <span class="ruby-keyword kw">end</span>
4822: 
4823:         <span class="ruby-comment cmt">#memmove(output + i + 1, output + i, (out - i) * sizeof *output)</span>
4824:         <span class="ruby-identifier">output</span>[<span class="ruby-identifier">i</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">out</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">i</span>] = <span class="ruby-identifier">output</span>[<span class="ruby-identifier">i</span>, <span class="ruby-identifier">out</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">i</span>]
4825:         <span class="ruby-identifier">output</span>[<span class="ruby-identifier">i</span>] = <span class="ruby-identifier">n</span>
4826:         <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
4827: 
4828:         <span class="ruby-identifier">out</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
4829:       <span class="ruby-keyword kw">end</span>
4830: 
4831:       <span class="ruby-identifier">output_length</span>[<span class="ruby-value">0</span>] = <span class="ruby-identifier">out</span>
4832: 
4833:       <span class="ruby-identifier">output</span>.<span class="ruby-identifier">pack</span>(<span class="ruby-value str">&quot;U*&quot;</span>)
4834:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="punycode-decode-digit-method" class="method-detail ">
				<a name="method-c-punycode_decode_digit"></a>

				<div class="method-heading">
				
					<span class="method-name">punycode_decode_digit</span><span
						class="method-args">(codepoint)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns the numeric value of a basic codepoint (for use in representing
integers) in the range 0 to base - 1, or <a
href="IDNA.html#PUNYCODE_BASE">PUNYCODE_BASE</a> if codepoint does not
represent a value.
</p>
					

					
					<div class="method-source-code"
						id="punycode-decode-digit-source">
<pre>
      <span class="ruby-comment cmt"># File lib/addressable/idna/pure.rb, line 4855</span>
4855:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">punycode_decode_digit</span>(<span class="ruby-identifier">codepoint</span>)
4856:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">codepoint</span> <span class="ruby-operator">-</span> <span class="ruby-value">48</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">10</span>
4857:         <span class="ruby-identifier">codepoint</span> <span class="ruby-operator">-</span> <span class="ruby-value">22</span>
4858:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">codepoint</span> <span class="ruby-operator">-</span> <span class="ruby-value">65</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">26</span>
4859:         <span class="ruby-identifier">codepoint</span> <span class="ruby-operator">-</span> <span class="ruby-value">65</span>
4860:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">codepoint</span> <span class="ruby-operator">-</span> <span class="ruby-value">97</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">26</span>
4861:         <span class="ruby-identifier">codepoint</span> <span class="ruby-operator">-</span> <span class="ruby-value">97</span>
4862:       <span class="ruby-keyword kw">else</span>
4863:         <span class="ruby-constant">PUNYCODE_BASE</span>
4864:       <span class="ruby-keyword kw">end</span>
4865:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="punycode-delimiter--method" class="method-detail ">
				<a name="method-c-punycode_delimiter%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">punycode_delimiter?</span><span
						class="method-args">(codepoint)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="punycode-delimiter--source">
<pre>
      <span class="ruby-comment cmt"># File lib/addressable/idna/pure.rb, line 4842</span>
4842:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">punycode_delimiter?</span>(<span class="ruby-identifier">codepoint</span>)
4843:       <span class="ruby-identifier">codepoint</span> <span class="ruby-operator">==</span> <span class="ruby-constant">PUNYCODE_DELIMITER</span>
4844:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="punycode-encode-method" class="method-detail ">
				<a name="method-c-punycode_encode"></a>

				<div class="method-heading">
				
					<span class="method-name">punycode_encode</span><span
						class="method-args">(unicode)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="punycode-encode-source">
<pre>
      <span class="ruby-comment cmt"># File lib/addressable/idna/pure.rb, line 4595</span>
4595:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">punycode_encode</span>(<span class="ruby-identifier">unicode</span>)
4596:       <span class="ruby-identifier">input</span> = <span class="ruby-identifier">unicode</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-value str">&quot;U*&quot;</span>)
4597:       <span class="ruby-identifier">output</span> = [<span class="ruby-value">0</span>] * (<span class="ruby-constant">ACE_MAX_LENGTH</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
4598:       <span class="ruby-identifier">input_length</span> = <span class="ruby-identifier">input</span>.<span class="ruby-identifier">size</span>
4599:       <span class="ruby-identifier">output_length</span> = [<span class="ruby-constant">ACE_MAX_LENGTH</span>]
4600: 
4601:       <span class="ruby-comment cmt"># Initialize the state</span>
4602:       <span class="ruby-identifier">n</span> = <span class="ruby-constant">PUNYCODE_INITIAL_N</span>
4603:       <span class="ruby-identifier">delta</span> = <span class="ruby-identifier">out</span> = <span class="ruby-value">0</span>
4604:       <span class="ruby-identifier">max_out</span> = <span class="ruby-identifier">output_length</span>[<span class="ruby-value">0</span>]
4605:       <span class="ruby-identifier">bias</span> = <span class="ruby-constant">PUNYCODE_INITIAL_BIAS</span>
4606: 
4607:       <span class="ruby-comment cmt"># Handle the basic code points:</span>
4608:       <span class="ruby-identifier">input_length</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">j</span><span class="ruby-operator">|</span>
4609:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">punycode_basic?</span>(<span class="ruby-identifier">input</span>[<span class="ruby-identifier">j</span>])
4610:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">max_out</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">out</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">2</span>
4611:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">PunycodeBigOutput</span>,
4612:               <span class="ruby-value str">&quot;Output would exceed the space provided.&quot;</span>
4613:           <span class="ruby-keyword kw">end</span>
4614:           <span class="ruby-identifier">output</span>[<span class="ruby-identifier">out</span>] = <span class="ruby-identifier">input</span>[<span class="ruby-identifier">j</span>]
4615:           <span class="ruby-identifier">out</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
4616:         <span class="ruby-keyword kw">end</span>
4617:       <span class="ruby-keyword kw">end</span>
4618: 
4619:       <span class="ruby-identifier">h</span> = <span class="ruby-identifier">b</span> = <span class="ruby-identifier">out</span>
4620: 
4621:       <span class="ruby-comment cmt"># h is the number of code points that have been handled, b is the</span>
4622:       <span class="ruby-comment cmt"># number of basic code points, and out is the number of characters</span>
4623:       <span class="ruby-comment cmt"># that have been output.</span>
4624: 
4625:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">b</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
4626:         <span class="ruby-identifier">output</span>[<span class="ruby-identifier">out</span>] = <span class="ruby-constant">PUNYCODE_DELIMITER</span>
4627:         <span class="ruby-identifier">out</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
4628:       <span class="ruby-keyword kw">end</span>
4629: 
4630:       <span class="ruby-comment cmt"># Main encoding loop:</span>
4631: 
4632:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">h</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">input_length</span>
4633:         <span class="ruby-comment cmt"># All non-basic code points &lt; n have been</span>
4634:         <span class="ruby-comment cmt"># handled already.  Find the next larger one:</span>
4635: 
4636:         <span class="ruby-identifier">m</span> = <span class="ruby-constant">PUNYCODE_MAXINT</span>
4637:         <span class="ruby-identifier">input_length</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">j</span><span class="ruby-operator">|</span>
4638:           <span class="ruby-identifier">m</span> = <span class="ruby-identifier">input</span>[<span class="ruby-identifier">j</span>] <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">n</span><span class="ruby-operator">...</span><span class="ruby-identifier">m</span>) <span class="ruby-operator">===</span> <span class="ruby-identifier">input</span>[<span class="ruby-identifier">j</span>]
4639:         <span class="ruby-keyword kw">end</span>
4640: 
4641:         <span class="ruby-comment cmt"># Increase delta enough to advance the decoder's</span>
4642:         <span class="ruby-comment cmt"># &lt;n,i&gt; state to &lt;m,0&gt;, but guard against overflow:</span>
4643: 
4644:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">m</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">n</span> <span class="ruby-operator">&gt;</span> (<span class="ruby-constant">PUNYCODE_MAXINT</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">delta</span>) <span class="ruby-operator">/</span> (<span class="ruby-identifier">h</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
4645:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">PunycodeOverflow</span>, <span class="ruby-value str">&quot;Input needs wider integers to process.&quot;</span>
4646:         <span class="ruby-keyword kw">end</span>
4647:         <span class="ruby-identifier">delta</span> <span class="ruby-operator">+=</span> (<span class="ruby-identifier">m</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">n</span>) * (<span class="ruby-identifier">h</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
4648:         <span class="ruby-identifier">n</span> = <span class="ruby-identifier">m</span>
4649: 
4650:         <span class="ruby-identifier">input_length</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">j</span><span class="ruby-operator">|</span>
4651:           <span class="ruby-comment cmt"># Punycode does not need to check whether input[j] is basic:</span>
4652:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">input</span>[<span class="ruby-identifier">j</span>] <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">n</span>
4653:             <span class="ruby-identifier">delta</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
4654:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">delta</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
4655:               <span class="ruby-identifier">raise</span> <span class="ruby-constant">PunycodeOverflow</span>,
4656:                 <span class="ruby-value str">&quot;Input needs wider integers to process.&quot;</span>
4657:             <span class="ruby-keyword kw">end</span>
4658:           <span class="ruby-keyword kw">end</span>
4659: 
4660:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">input</span>[<span class="ruby-identifier">j</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">n</span>
4661:             <span class="ruby-comment cmt"># Represent delta as a generalized variable-length integer:</span>
4662: 
4663:             <span class="ruby-identifier">q</span> = <span class="ruby-identifier">delta</span>; <span class="ruby-identifier">k</span> = <span class="ruby-constant">PUNYCODE_BASE</span>
4664:             <span class="ruby-keyword kw">while</span> <span class="ruby-keyword kw">true</span>
4665:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">out</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">max_out</span>
4666:                 <span class="ruby-identifier">raise</span> <span class="ruby-constant">PunycodeBigOutput</span>,
4667:                   <span class="ruby-value str">&quot;Output would exceed the space provided.&quot;</span>
4668:               <span class="ruby-keyword kw">end</span>
4669:               <span class="ruby-identifier">t</span> = (
4670:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">bias</span>
4671:                   <span class="ruby-constant">PUNYCODE_TMIN</span>
4672:                 <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">bias</span> <span class="ruby-operator">+</span> <span class="ruby-constant">PUNYCODE_TMAX</span>
4673:                   <span class="ruby-constant">PUNYCODE_TMAX</span>
4674:                 <span class="ruby-keyword kw">else</span>
4675:                   <span class="ruby-identifier">k</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">bias</span>
4676:                 <span class="ruby-keyword kw">end</span>
4677:               )
4678:               <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">q</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">t</span>
4679:               <span class="ruby-identifier">output</span>[<span class="ruby-identifier">out</span>] =
4680:                 <span class="ruby-identifier">punycode_encode_digit</span>(<span class="ruby-identifier">t</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">q</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">t</span>) <span class="ruby-operator">%</span> (<span class="ruby-constant">PUNYCODE_BASE</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">t</span>))
4681:               <span class="ruby-identifier">out</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
4682:               <span class="ruby-identifier">q</span> = (<span class="ruby-identifier">q</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">t</span>) <span class="ruby-operator">/</span> (<span class="ruby-constant">PUNYCODE_BASE</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">t</span>)
4683:               <span class="ruby-identifier">k</span> <span class="ruby-operator">+=</span> <span class="ruby-constant">PUNYCODE_BASE</span>
4684:             <span class="ruby-keyword kw">end</span>
4685: 
4686:             <span class="ruby-identifier">output</span>[<span class="ruby-identifier">out</span>] = <span class="ruby-identifier">punycode_encode_digit</span>(<span class="ruby-identifier">q</span>)
4687:             <span class="ruby-identifier">out</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
4688:             <span class="ruby-identifier">bias</span> = <span class="ruby-identifier">punycode_adapt</span>(<span class="ruby-identifier">delta</span>, <span class="ruby-identifier">h</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">h</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">b</span>)
4689:             <span class="ruby-identifier">delta</span> = <span class="ruby-value">0</span>
4690:             <span class="ruby-identifier">h</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
4691:           <span class="ruby-keyword kw">end</span>
4692:         <span class="ruby-keyword kw">end</span>
4693: 
4694:         <span class="ruby-identifier">delta</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
4695:         <span class="ruby-identifier">n</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
4696:       <span class="ruby-keyword kw">end</span>
4697: 
4698:       <span class="ruby-identifier">output_length</span>[<span class="ruby-value">0</span>] = <span class="ruby-identifier">out</span>
4699: 
4700:       <span class="ruby-identifier">outlen</span> = <span class="ruby-identifier">out</span>
4701:       <span class="ruby-identifier">outlen</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">j</span><span class="ruby-operator">|</span>
4702:         <span class="ruby-identifier">c</span> = <span class="ruby-identifier">output</span>[<span class="ruby-identifier">j</span>]
4703:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">127</span>
4704:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">Exception</span>, <span class="ruby-value str">&quot;Invalid output char.&quot;</span>
4705:         <span class="ruby-keyword kw">end</span>
4706:         <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">PUNYCODE_PRINT_ASCII</span>[<span class="ruby-identifier">c</span>]
4707:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">PunycodeBadInput</span>, <span class="ruby-value str">&quot;Input is invalid.&quot;</span>
4708:         <span class="ruby-keyword kw">end</span>
4709:       <span class="ruby-keyword kw">end</span>
4710: 
4711:       <span class="ruby-identifier">output</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-identifier">outlen</span>].<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">chr</span> }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;&quot;</span>).<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/\00++\z/</span>, <span class="ruby-value str">&quot;&quot;</span>)
4712:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="punycode-encode-method" class="method-detail ">
				<a name="method-c-punycode_encode"></a>

				<div class="method-heading">
				
					<span class="method-name">punycode_encode</span><span
						class="method-args">(value)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="punycode-encode-source">
<pre>
    <span class="ruby-comment cmt"># File lib/addressable/idna/native.rb, line 23</span>
23:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">punycode_encode</span>(<span class="ruby-identifier">value</span>)
24:       <span class="ruby-constant">IDN</span><span class="ruby-operator">::</span><span class="ruby-constant">Punycode</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-identifier">value</span>)
25:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="punycode-encode-digit-method" class="method-detail ">
				<a name="method-c-punycode_encode_digit"></a>

				<div class="method-heading">
				
					<span class="method-name">punycode_encode_digit</span><span
						class="method-args">(d)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="punycode-encode-digit-source">
<pre>
      <span class="ruby-comment cmt"># File lib/addressable/idna/pure.rb, line 4847</span>
4847:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">punycode_encode_digit</span>(<span class="ruby-identifier">d</span>)
4848:       <span class="ruby-identifier">d</span> <span class="ruby-operator">+</span> <span class="ruby-value">22</span> <span class="ruby-operator">+</span> <span class="ruby-value">75</span> * ((<span class="ruby-identifier">d</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">26</span>) <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>)
4849:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="unicode-compose-method" class="method-detail ">
				<a name="method-c-unicode_compose"></a>

				<div class="method-heading">
				
					<span class="method-name">unicode_compose</span><span
						class="method-args">(unpacked)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="unicode-compose-source">
<pre>
     <span class="ruby-comment cmt"># File lib/addressable/idna/pure.rb, line 125</span>
125:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unicode_compose</span>(<span class="ruby-identifier">unpacked</span>)
126:       <span class="ruby-identifier">unpacked_result</span> = []
127:       <span class="ruby-identifier">length</span> = <span class="ruby-identifier">unpacked</span>.<span class="ruby-identifier">length</span>
128: 
129:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">unpacked</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
130: 
131:       <span class="ruby-identifier">starter</span> = <span class="ruby-identifier">unpacked</span>[<span class="ruby-value">0</span>]
132:       <span class="ruby-identifier">starter_cc</span> = <span class="ruby-identifier">lookup_unicode_combining_class</span>(<span class="ruby-identifier">starter</span>)
133:       <span class="ruby-identifier">starter_cc</span> = <span class="ruby-value">256</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">starter_cc</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
134:       <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">...</span><span class="ruby-identifier">length</span>
135:         <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">unpacked</span>[<span class="ruby-identifier">i</span>]
136:         <span class="ruby-identifier">cc</span> = <span class="ruby-identifier">lookup_unicode_combining_class</span>(<span class="ruby-identifier">ch</span>)
137: 
138:         <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">starter_cc</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span>
139:             (<span class="ruby-identifier">composite</span> = <span class="ruby-identifier">unicode_compose_pair</span>(<span class="ruby-identifier">starter</span>, <span class="ruby-identifier">ch</span>)) <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>)
140:           <span class="ruby-identifier">starter</span> = <span class="ruby-identifier">composite</span>
141:           <span class="ruby-identifier">startercc</span> = <span class="ruby-identifier">lookup_unicode_combining_class</span>(<span class="ruby-identifier">composite</span>)
142:         <span class="ruby-keyword kw">else</span>
143:           <span class="ruby-identifier">unpacked_result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">starter</span>
144:           <span class="ruby-identifier">starter</span> = <span class="ruby-identifier">ch</span>
145:           <span class="ruby-identifier">startercc</span> = <span class="ruby-identifier">cc</span>
146:         <span class="ruby-keyword kw">end</span>
147:       <span class="ruby-keyword kw">end</span>
148:       <span class="ruby-identifier">unpacked_result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">starter</span>
149:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">unpacked_result</span>
150:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="unicode-compose-pair-method" class="method-detail ">
				<a name="method-c-unicode_compose_pair"></a>

				<div class="method-heading">
				
					<span class="method-name">unicode_compose_pair</span><span
						class="method-args">(ch_one, ch_two)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="unicode-compose-pair-source">
<pre>
     <span class="ruby-comment cmt"># File lib/addressable/idna/pure.rb, line 153</span>
153:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unicode_compose_pair</span>(<span class="ruby-identifier">ch_one</span>, <span class="ruby-identifier">ch_two</span>)
154:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ch_one</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-constant">HANGUL_LBASE</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ch_one</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">HANGUL_LBASE</span> <span class="ruby-operator">+</span> <span class="ruby-constant">HANGUL_LCOUNT</span> <span class="ruby-operator">&amp;&amp;</span>
155:           <span class="ruby-identifier">ch_two</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-constant">HANGUL_VBASE</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ch_two</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">HANGUL_VBASE</span> <span class="ruby-operator">+</span> <span class="ruby-constant">HANGUL_VCOUNT</span>
156:         <span class="ruby-comment cmt"># Hangul L + V</span>
157:         <span class="ruby-keyword kw">return</span> <span class="ruby-constant">HANGUL_SBASE</span> <span class="ruby-operator">+</span> (
158:           (<span class="ruby-identifier">ch_one</span> <span class="ruby-operator">-</span> <span class="ruby-constant">HANGUL_LBASE</span>) * <span class="ruby-constant">HANGUL_VCOUNT</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">ch_two</span> <span class="ruby-operator">-</span> <span class="ruby-constant">HANGUL_VBASE</span>)
159:         ) * <span class="ruby-constant">HANGUL_TCOUNT</span>
160:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">ch_one</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-constant">HANGUL_SBASE</span> <span class="ruby-operator">&amp;&amp;</span>
161:           <span class="ruby-identifier">ch_one</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">HANGUL_SBASE</span> <span class="ruby-operator">+</span> <span class="ruby-constant">HANGUL_SCOUNT</span> <span class="ruby-operator">&amp;&amp;</span>
162:           (<span class="ruby-identifier">ch_one</span> <span class="ruby-operator">-</span> <span class="ruby-constant">HANGUL_SBASE</span>) <span class="ruby-operator">%</span> <span class="ruby-constant">HANGUL_TCOUNT</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span>
163:           <span class="ruby-identifier">ch_two</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-constant">HANGUL_TBASE</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ch_two</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">HANGUL_TBASE</span> <span class="ruby-operator">+</span> <span class="ruby-constant">HANGUL_TCOUNT</span>
164:            <span class="ruby-comment cmt"># Hangul LV + T</span>
165:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">ch_one</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">ch_two</span> <span class="ruby-operator">-</span> <span class="ruby-constant">HANGUL_TBASE</span>)
166:       <span class="ruby-keyword kw">end</span>
167: 
168:       <span class="ruby-identifier">p</span> = []
169:       <span class="ruby-identifier">ucs4_to_utf8</span> = <span class="ruby-identifier">lambda</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ch</span><span class="ruby-operator">|</span>
170:         <span class="ruby-comment cmt"># For some reason, rcov likes to drop BUS errors here.</span>
171:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">128</span>
172:           <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
173:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">2048</span>
174:           <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">ch</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">6</span> <span class="ruby-operator">|</span> <span class="ruby-value">192</span>)
175:           <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">ch</span> &amp; <span class="ruby-value">63</span> <span class="ruby-operator">|</span> <span class="ruby-value">128</span>)
176:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0x10000</span>
177:           <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">ch</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">12</span> <span class="ruby-operator">|</span> <span class="ruby-value">224</span>)
178:           <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">ch</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">6</span> &amp; <span class="ruby-value">63</span> <span class="ruby-operator">|</span> <span class="ruby-value">128</span>)
179:           <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">ch</span> &amp; <span class="ruby-value">63</span> <span class="ruby-operator">|</span> <span class="ruby-value">128</span>)
180:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0x200000</span>
181:           <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">ch</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">18</span> <span class="ruby-operator">|</span> <span class="ruby-value">240</span>)
182:           <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">ch</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">12</span> &amp; <span class="ruby-value">63</span> <span class="ruby-operator">|</span> <span class="ruby-value">128</span>)
183:           <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">ch</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">6</span> &amp; <span class="ruby-value">63</span> <span class="ruby-operator">|</span> <span class="ruby-value">128</span>)
184:           <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">ch</span> &amp; <span class="ruby-value">63</span> <span class="ruby-operator">|</span> <span class="ruby-value">128</span>)
185:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0x4000000</span>
186:           <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">ch</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">24</span> <span class="ruby-operator">|</span> <span class="ruby-value">248</span>)
187:           <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">ch</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">18</span> &amp; <span class="ruby-value">63</span> <span class="ruby-operator">|</span> <span class="ruby-value">128</span>)
188:           <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">ch</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">12</span> &amp; <span class="ruby-value">63</span> <span class="ruby-operator">|</span> <span class="ruby-value">128</span>)
189:           <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">ch</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">6</span> &amp; <span class="ruby-value">63</span> <span class="ruby-operator">|</span> <span class="ruby-value">128</span>)
190:           <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">ch</span> &amp; <span class="ruby-value">63</span> <span class="ruby-operator">|</span> <span class="ruby-value">128</span>)
191:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0x80000000</span>
192:           <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">ch</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">30</span> <span class="ruby-operator">|</span> <span class="ruby-value">252</span>)
193:           <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">ch</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">24</span> &amp; <span class="ruby-value">63</span> <span class="ruby-operator">|</span> <span class="ruby-value">128</span>)
194:           <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">ch</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">18</span> &amp; <span class="ruby-value">63</span> <span class="ruby-operator">|</span> <span class="ruby-value">128</span>)
195:           <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">ch</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">12</span> &amp; <span class="ruby-value">63</span> <span class="ruby-operator">|</span> <span class="ruby-value">128</span>)
196:           <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">ch</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">6</span> &amp; <span class="ruby-value">63</span> <span class="ruby-operator">|</span> <span class="ruby-value">128</span>)
197:           <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">ch</span> &amp; <span class="ruby-value">63</span> <span class="ruby-operator">|</span> <span class="ruby-value">128</span>)
198:         <span class="ruby-keyword kw">end</span>
199:       <span class="ruby-keyword kw">end</span>
200: 
201:       <span class="ruby-identifier">ucs4_to_utf8</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">ch_one</span>)
202:       <span class="ruby-identifier">ucs4_to_utf8</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">ch_two</span>)
203: 
204:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">lookup_unicode_composition</span>(<span class="ruby-identifier">p</span>)
205:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="unicode-decompose-method" class="method-detail ">
				<a name="method-c-unicode_decompose"></a>

				<div class="method-heading">
				
					<span class="method-name">unicode_decompose</span><span
						class="method-args">(unpacked)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="unicode-decompose-source">
<pre>
     <span class="ruby-comment cmt"># File lib/addressable/idna/pure.rb, line 232</span>
232:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unicode_decompose</span>(<span class="ruby-identifier">unpacked</span>)
233:       <span class="ruby-identifier">unpacked_result</span> = []
234:       <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">cp</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">unpacked</span>
235:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">cp</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-constant">HANGUL_SBASE</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">cp</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">HANGUL_SBASE</span> <span class="ruby-operator">+</span> <span class="ruby-constant">HANGUL_SCOUNT</span>
236:           <span class="ruby-identifier">l</span>, <span class="ruby-identifier">v</span>, <span class="ruby-identifier">t</span> = <span class="ruby-identifier">unicode_decompose_hangul</span>(<span class="ruby-identifier">cp</span>)
237:           <span class="ruby-identifier">unpacked_result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">l</span>
238:           <span class="ruby-identifier">unpacked_result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">v</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">v</span>
239:           <span class="ruby-identifier">unpacked_result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">t</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">t</span>
240:         <span class="ruby-keyword kw">else</span>
241:           <span class="ruby-identifier">dc</span> = <span class="ruby-identifier">lookup_unicode_compatibility</span>(<span class="ruby-identifier">cp</span>)
242:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">dc</span>
243:             <span class="ruby-identifier">unpacked_result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">cp</span>
244:           <span class="ruby-keyword kw">else</span>
245:             <span class="ruby-identifier">unpacked_result</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">unicode_decompose</span>(<span class="ruby-identifier">dc</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-value str">&quot;U*&quot;</span>)))
246:           <span class="ruby-keyword kw">end</span>
247:         <span class="ruby-keyword kw">end</span>
248:       <span class="ruby-keyword kw">end</span>
249:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">unpacked_result</span>
250:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="unicode-decompose-hangul-method" class="method-detail ">
				<a name="method-c-unicode_decompose_hangul"></a>

				<div class="method-heading">
				
					<span class="method-name">unicode_decompose_hangul</span><span
						class="method-args">(codepoint)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="unicode-decompose-hangul-source">
<pre>
     <span class="ruby-comment cmt"># File lib/addressable/idna/pure.rb, line 253</span>
253:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unicode_decompose_hangul</span>(<span class="ruby-identifier">codepoint</span>)
254:       <span class="ruby-identifier">sindex</span> = <span class="ruby-identifier">codepoint</span> <span class="ruby-operator">-</span> <span class="ruby-constant">HANGUL_SBASE</span>;
255:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sindex</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">sindex</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-constant">HANGUL_SCOUNT</span>
256:         <span class="ruby-identifier">l</span> = <span class="ruby-identifier">codepoint</span>
257:         <span class="ruby-identifier">v</span> = <span class="ruby-identifier">t</span> = <span class="ruby-keyword kw">nil</span>
258:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">l</span>, <span class="ruby-identifier">v</span>, <span class="ruby-identifier">t</span>
259:       <span class="ruby-keyword kw">end</span>
260:       <span class="ruby-identifier">l</span> = <span class="ruby-constant">HANGUL_LBASE</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">sindex</span> <span class="ruby-operator">/</span> <span class="ruby-constant">HANGUL_NCOUNT</span>
261:       <span class="ruby-identifier">v</span> = <span class="ruby-constant">HANGUL_VBASE</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">sindex</span> <span class="ruby-operator">%</span> <span class="ruby-constant">HANGUL_NCOUNT</span>) <span class="ruby-operator">/</span> <span class="ruby-constant">HANGUL_TCOUNT</span>
262:       <span class="ruby-identifier">t</span> = <span class="ruby-constant">HANGUL_TBASE</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">sindex</span> <span class="ruby-operator">%</span> <span class="ruby-constant">HANGUL_TCOUNT</span>
263:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">t</span> <span class="ruby-operator">==</span> <span class="ruby-constant">HANGUL_TBASE</span>
264:         <span class="ruby-identifier">t</span> = <span class="ruby-keyword kw">nil</span>
265:       <span class="ruby-keyword kw">end</span>
266:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">l</span>, <span class="ruby-identifier">v</span>, <span class="ruby-identifier">t</span>
267:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="unicode-downcase-method" class="method-detail ">
				<a name="method-c-unicode_downcase"></a>

				<div class="method-heading">
				
					<span class="method-name">unicode_downcase</span><span
						class="method-args">(input)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Unicode aware downcase method.
</p>
<p>
@api private @param [String] input
</p>
<pre>
  The input string.
</pre>
<p>
@return [String] The downcased result.
</p>
					

					
					<div class="method-source-code"
						id="unicode-downcase-source">
<pre>
     <span class="ruby-comment cmt"># File lib/addressable/idna/pure.rb, line 118</span>
118:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unicode_downcase</span>(<span class="ruby-identifier">input</span>)
119:       <span class="ruby-identifier">unpacked</span> = <span class="ruby-identifier">input</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-value str">&quot;U*&quot;</span>)
120:       <span class="ruby-identifier">unpacked</span>.<span class="ruby-identifier">map!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">codepoint</span><span class="ruby-operator">|</span> <span class="ruby-identifier">lookup_unicode_lowercase</span>(<span class="ruby-identifier">codepoint</span>) }
121:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">unpacked</span>.<span class="ruby-identifier">pack</span>(<span class="ruby-value str">&quot;U*&quot;</span>)
122:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="unicode-sort-canonical-method" class="method-detail ">
				<a name="method-c-unicode_sort_canonical"></a>

				<div class="method-heading">
				
					<span class="method-name">unicode_sort_canonical</span><span
						class="method-args">(unpacked)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="unicode-sort-canonical-source">
<pre>
     <span class="ruby-comment cmt"># File lib/addressable/idna/pure.rb, line 208</span>
208:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unicode_sort_canonical</span>(<span class="ruby-identifier">unpacked</span>)
209:       <span class="ruby-identifier">unpacked</span> = <span class="ruby-identifier">unpacked</span>.<span class="ruby-identifier">dup</span>
210:       <span class="ruby-identifier">i</span> = <span class="ruby-value">1</span>
211:       <span class="ruby-identifier">length</span> = <span class="ruby-identifier">unpacked</span>.<span class="ruby-identifier">length</span>
212: 
213:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">unpacked</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">length</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">2</span>
214: 
215:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">length</span>
216:         <span class="ruby-identifier">last</span> = <span class="ruby-identifier">unpacked</span>[<span class="ruby-identifier">i</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>]
217:         <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">unpacked</span>[<span class="ruby-identifier">i</span>]
218:         <span class="ruby-identifier">last_cc</span> = <span class="ruby-identifier">lookup_unicode_combining_class</span>(<span class="ruby-identifier">last</span>)
219:         <span class="ruby-identifier">cc</span> = <span class="ruby-identifier">lookup_unicode_combining_class</span>(<span class="ruby-identifier">ch</span>)
220:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">cc</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">last_cc</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">last_cc</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cc</span>
221:           <span class="ruby-identifier">unpacked</span>[<span class="ruby-identifier">i</span>] = <span class="ruby-identifier">last</span>
222:           <span class="ruby-identifier">unpacked</span>[<span class="ruby-identifier">i</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>] = <span class="ruby-identifier">ch</span>
223:           <span class="ruby-identifier">i</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
224:         <span class="ruby-keyword kw">else</span>
225:           <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
226:         <span class="ruby-keyword kw">end</span>
227:       <span class="ruby-keyword kw">end</span>
228:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">unpacked</span>
229:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

