<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>File: load-path-auto-adjuster.rb [s4t-utils-1.0.4 Documentation]</title>

	<link type="text/css" media="screen" href="../../rdoc.css" rel="stylesheet" />

	<script src="../../js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>
</head>

<body class="file file-popup">
	<div id="metadata">
		<dl>
			<dt class="modified-date">Last Modified</dt>
			<dd class="modified-date">2012-07-11 23:50:02 -0700</dd>

			
			<dt class="requires">Requires</dt>
			<dd class="requires">
				<ul>
				
					<li>rubygems</li>
				
					<li>pathname</li>
				
				</ul>
			</dd>
			

			
		</dl>
	</div>

	<div id="documentation">
		
		<div class="description">
			<h2>Description</h2>
			<p>
This is loaded by an executable script in one of two cases:
</p>
<p>
It&#8217;s a development version living in the bin part of this directory
structure (but it can invoked from any place).
</p>
<pre>
  project/
    bin/
    lib/
       project/
          third-party/
             s4t-utils/
                this file
</pre>
<p>
It&#8217;s a deployed version living in some random place, with  the
site_ruby directory in the page.
</p>
<pre>
  site_ruby/1.8/
     project/
       third-party/
          s4t-utils/
             this file
</pre>
<p>
In order for this file to have been required in both cases, the following
code is executed in the caller:
</p>
<p>
$:.unshift((Pathname.new(<em>FILE</em>).parent.parent +
&#8216;lib&#8217;).to_s) require
&#8216;package/third-party/s4t-utils/load-path-auto-adjuster&#8216;
</p>
<p>
In the first case, that will put something like &#8220;../lib&#8221; on the
load path.  In the second case, it will put harmless garbage on the path
(harmless because it won&#8217;t contain this file, which will still be
found somewhere later in the load path). 
</p>
<p>
The first thing this file does is pop that off, it having done its job. In
the first (development) case, it puts the following on the load path:
</p>
<pre>
       project/lib &amp; project/lib/project/third-party &amp; project
</pre>
<p>
(&#8216;project&#8217; is added so that <require
&#8216;test/util-file&#8217;> works.)
</p>
<pre>
   In the second, it adds only the third-party library and takes care
   to add it just after whatever component in the path contains this
   file. (It will thus not interfere with clashing packages earlier
   in the path.) 
       site_ruby/1.8/project/third-party
   since site_ruby/1.8 (or the equivalent) is already on there.</pre>

		</div>
		
	</div>
</body>
</html>

