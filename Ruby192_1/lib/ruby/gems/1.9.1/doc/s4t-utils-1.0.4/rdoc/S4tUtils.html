<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Module: S4tUtils</title>

	<link rel="stylesheet" href="./rdoc.css" type="text/css" media="screen" />

	<script src="./js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="module">

	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="./lib/s4t-utils/capturing-globals_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/s4t-utils/capturing-globals.rb">lib/s4t-utils/capturing-globals.rb</a></li>
					
						<li><a href="./lib/s4t-utils/claims_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/s4t-utils/claims.rb">lib/s4t-utils/claims.rb</a></li>
					
						<li><a href="./lib/s4t-utils/command-line_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/s4t-utils/command-line.rb">lib/s4t-utils/command-line.rb</a></li>
					
						<li><a href="./lib/s4t-utils/error-handling_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/s4t-utils/error-handling.rb">lib/s4t-utils/error-handling.rb</a></li>
					
						<li><a href="./lib/s4t-utils/friendly-format_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/s4t-utils/friendly-format.rb">lib/s4t-utils/friendly-format.rb</a></li>
					
						<li><a href="./lib/s4t-utils/hacks_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/s4t-utils/hacks.rb">lib/s4t-utils/hacks.rb</a></li>
					
						<li><a href="./lib/s4t-utils/load-path-auto-adjuster_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/s4t-utils/load-path-auto-adjuster.rb">lib/s4t-utils/load-path-auto-adjuster.rb</a></li>
					
						<li><a href="./lib/s4t-utils/os_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/s4t-utils/os.rb">lib/s4t-utils/os.rb</a></li>
					
						<li><a href="./lib/s4t-utils/rake-task-helpers_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/s4t-utils/rake-task-helpers.rb">lib/s4t-utils/rake-task-helpers.rb</a></li>
					
						<li><a href="./lib/s4t-utils/svn-file-movement_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/s4t-utils/svn-file-movement.rb">lib/s4t-utils/svn-file-movement.rb</a></li>
					
						<li><a href="./lib/s4t-utils/test-util_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/s4t-utils/test-util.rb">lib/s4t-utils/test-util.rb</a></li>
					
						<li><a href="./lib/s4t-utils/version_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/s4t-utils/version.rb">lib/s4t-utils/version.rb</a></li>
					
						<li><a href="./lib/s4t-utils_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/s4t-utils.rb">lib/s4t-utils.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			

			<!-- Namespace Contents -->
			
			<div id="namespace-list-section" class="section">
				<h3 class="section-header">Namespace</h3>
				<ul class="link-list">
					
					<li><span class="type">MODULE</span> <a href="S4tUtils/Hidden.html">S4tUtils::Hidden</a></li>
					
					<li><span class="type">MODULE</span> <a href="S4tUtils/TestUtil.html">S4tUtils::TestUtil</a></li>
					
					<li><span class="type">CLASS</span> <a href="S4tUtils/ArgForwarder.html">S4tUtils::ArgForwarder</a></li>
					
				</ul>
			</div>
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#method-c-set_script_lib_path">::set_script_lib_path</a></li>
					
					<li><a href="#method-c-set_test_paths">::set_test_paths</a></li>
					
					<li><a href="#method-i-ask">#ask</a></li>
					
					<li><a href="#method-i-capturing_stderr">#capturing_stderr</a></li>
					
					<li><a href="#method-i-capturing_stdout">#capturing_stdout</a></li>
					
					<li><a href="#method-i-erasing_local_config_file">#erasing_local_config_file</a></li>
					
					<li><a href="#method-i-friendly_list">#friendly_list</a></li>
					
					<li><a href="#method-i-pi">#pi</a></li>
					
					<li><a href="#method-i-prog1">#prog1</a></li>
					
					<li><a href="#method-i-set_script_lib_path">#set_script_lib_path</a></li>
					
					<li><a href="#method-i-set_test_paths">#set_test_paths</a></li>
					
					<li><a href="#method-i-symbol_safe_name">#symbol_safe_name</a></li>
					
					<li><a href="#method-i-user_claims">#user_claims</a></li>
					
					<li><a href="#method-i-user_denies">#user_denies</a></li>
					
					<li><a href="#method-i-user_disputes">#user_disputes</a></li>
					
					<li><a href="#method-i-user_is_bewildered">#user_is_bewildered</a></li>
					
					<li><a href="#method-i-with_command_args">#with_command_args</a></li>
					
					<li><a href="#method-i-with_environment_vars">#with_environment_vars</a></li>
					
					<li><a href="#method-i-with_home_right_here">#with_home_right_here</a></li>
					
					<li><a href="#method-i-with_local_config_file">#with_local_config_file</a></li>
					
					<li><a href="#method-i-with_pleasant_exceptions">#with_pleasant_exceptions</a></li>
					
					<li><a href="#method-i-with_stdin">#with_stdin</a></li>
					
					<li><a href="#method-i-without_pleasant_exceptions">#without_pleasant_exceptions</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
		</div>

		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="./History_txt.html">History.txt</a></li>
				
					<li class="file"><a href="./LICENSE_txt.html">LICENSE.txt</a></li>
				
					<li class="file"><a href="./Manifest_txt.html">Manifest.txt</a></li>
				
					<li class="file"><a href="./NOTES_txt.html">NOTES.txt</a></li>
				
					<li class="file"><a href="./README_txt.html">README.txt</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="./images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="./S4tUtils.html">S4tUtils</a></li>
				
					<li><a href="./S4tUtils/ArgForwarder.html">S4tUtils::ArgForwarder</a></li>
				
					<li><a href="./Test.html">Test</a></li>
				
					<li><a href="./Test/Unit.html">Test::Unit</a></li>
				
					<li><a href="./Test/Unit/Assertions.html">Test::Unit::Assertions</a></li>
				
					<li><a href="./HoeLike.html">HoeLike</a></li>
				
					<li><a href="./String.html">String</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="module">S4tUtils</h1>

		<div id="description">
			<p>
Note, unless otherwise noted, all methods defined in <a
href="S4tUtils.html">S4tUtils</a>  are both module functions and instance
functions.
</p>

		</div>

		<!-- Constants -->
		
		<div id="constants-list" class="section">
			<h3 class="section-header">Constants</h3>
			<dl>
			
				<dt><a name="Version">Version</a></dt>
				
				<dd class="description"></dd>
				
			
			</dl>
		</div>
		

		<!-- Attributes -->
		

		<!-- Methods -->
		
		<div id="public-class-method-details" class="method-section section">
			<h3 class="section-header">Public Class Methods</h3>

		
			<div id="set-script-lib-path-method" class="method-detail ">
				<a name="method-c-set_script_lib_path"></a>

				<div class="method-heading">
				
					<span class="method-name">set_script_lib_path</span><span
						class="method-args">(given)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
If the <em>given</em> file lives as a script inside a typical Ruby
development  structure, put ../lib at the front of the path. That includes
files from there in preference to old gems lying around. 
</p>
					

					
					<div class="method-source-code"
						id="set-script-lib-path-source">
<pre>
    <span class="ruby-comment cmt"># File lib/s4t-utils/os.rb, line 47</span>
47:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_script_lib_path</span>(<span class="ruby-identifier">given</span>) 
48:     <span class="ruby-identifier">path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">given</span>)
49:     <span class="ruby-identifier">p</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span> <span class="ruby-identifier">x</span> <span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">path</span>), <span class="ruby-value str">'..'</span>, <span class="ruby-identifier">x</span>) }
50:     <span class="ruby-identifier">l</span> = <span class="ruby-identifier">p</span>[<span class="ruby-value str">'lib'</span>]
51:     <span class="ruby-identifier">t</span> = <span class="ruby-identifier">p</span>[<span class="ruby-value str">'test'</span>]
52:     <span class="ruby-identifier">s</span> = <span class="ruby-identifier">p</span>[<span class="ruby-value str">'setup.rb'</span>]
53:     <span class="ruby-identifier">$:</span>.<span class="ruby-identifier">unshift</span>(<span class="ruby-identifier">l</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">l</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">t</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">s</span>)
54:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="set-test-paths-method" class="method-detail ">
				<a name="method-c-set_test_paths"></a>

				<div class="method-heading">
				
					<span class="method-name">set_test_paths</span><span
						class="method-args">(given)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Find and set the paths a test needs to run, given the normal Ruby directory
structure. <em>given</em> is something below the test directory.
PACKAGE_ROOT becomes the root of  the structure. PACKAGE_ROOT/lib and
PACKAGE_ROOT itself are put on the front of the path (the latter is so that
tests can require &#8216;test/something&#8217;.
</p>
					

					
					<div class="method-source-code"
						id="set-test-paths-source">
<pre>
    <span class="ruby-comment cmt"># File lib/s4t-utils/os.rb, line 33</span>
33:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_test_paths</span>(<span class="ruby-identifier">given</span>)
34:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">S4tUtils</span>.<span class="ruby-identifier">const_defined?</span>(<span class="ruby-value str">&quot;PACKAGE_ROOT&quot;</span>)
35: 
36:     <span class="ruby-identifier">path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">given</span>)
37:     <span class="ruby-identifier">i</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">&quot;/test/&quot;</span>)
38:     <span class="ruby-constant">S4tUtils</span>.<span class="ruby-identifier">const_set</span>(<span class="ruby-value str">&quot;PACKAGE_ROOT&quot;</span>, <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">i</span>])
39:     <span class="ruby-identifier">$:</span>.<span class="ruby-identifier">unshift</span>(<span class="ruby-node">&quot;#{PACKAGE_ROOT}/lib&quot;</span>)
40:     <span class="ruby-identifier">$:</span>.<span class="ruby-identifier">unshift</span>(<span class="ruby-node">&quot;#{PACKAGE_ROOT}&quot;</span>)
41:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	
		<div id="public-instance-method-details" class="method-section section">
			<h3 class="section-header">Public Instance Methods</h3>

		
			<div id="ask-method" class="method-detail ">
				<a name="method-i-ask"></a>

				<div class="method-heading">
				
					<span class="method-name">ask</span><span
						class="method-args">(default_answer, *question_lines)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Ask the question contained in the <em>question_lines</em>, prompt, and wait
for an answer. If the stripped value read from STDIN is  empty, use the
<em>default_answer</em>.
</p>
					

					
					<div class="method-source-code"
						id="ask-source">
<pre>
    <span class="ruby-comment cmt"># File lib/s4t-utils/command-line.rb, line 8</span>
 8:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ask</span>(<span class="ruby-identifier">default_answer</span>, *<span class="ruby-identifier">question_lines</span>)
 9:     <span class="ruby-identifier">puts</span> <span class="ruby-identifier">question_lines</span>
10:     <span class="ruby-identifier">print</span> <span class="ruby-node">&quot;[#{default_answer}] =&gt; &quot;</span>
11:     <span class="ruby-identifier">answer</span> = <span class="ruby-constant">STDIN</span>.<span class="ruby-identifier">readline</span>.<span class="ruby-identifier">strip</span>
12:     <span class="ruby-identifier">answer</span> = <span class="ruby-identifier">default_answer</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">answer</span> <span class="ruby-operator">==</span> <span class="ruby-value str">''</span>
13:     <span class="ruby-identifier">answer</span>
14:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="capturing-stderr-method" class="method-detail ">
				<a name="method-i-capturing_stderr"></a>

				<div class="method-heading">
				
					<span class="method-name">capturing_stderr</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Run the block, capturing output to $stderr in a string. That string is the
method&#8217;s return value.
</p>
					

					
					<div class="method-source-code"
						id="capturing-stderr-source">
<pre>
    <span class="ruby-comment cmt"># File lib/s4t-utils/capturing-globals.rb, line 9</span>
 9:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">capturing_stderr</span>
10:     <span class="ruby-identifier">old_stderr</span> = <span class="ruby-identifier">$stderr</span>
11:     <span class="ruby-identifier">new_stderr</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
12:     <span class="ruby-keyword kw">begin</span>
13:       <span class="ruby-identifier">$stderr</span> = <span class="ruby-identifier">new_stderr</span>
14:       <span class="ruby-keyword kw">yield</span>
15:     <span class="ruby-keyword kw">ensure</span>
16:       <span class="ruby-identifier">$stderr</span> = <span class="ruby-identifier">old_stderr</span>
17:     <span class="ruby-keyword kw">end</span>
18:     <span class="ruby-identifier">new_stderr</span>.<span class="ruby-identifier">string</span>
19:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="capturing-stdout-method" class="method-detail ">
				<a name="method-i-capturing_stdout"></a>

				<div class="method-heading">
				
					<span class="method-name">capturing_stdout</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Run the block, capturing output to $stdout in a string. That string is the
method&#8217;s return value.
</p>
<p>
Note: this assigns to $stdout, which is deprecated in  favor of
$stdout.reopen. However, reopen can&#8217;t take a  StringIO as an
argument.
</p>
					

					
					<div class="method-source-code"
						id="capturing-stdout-source">
<pre>
    <span class="ruby-comment cmt"># File lib/s4t-utils/capturing-globals.rb, line 27</span>
27:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">capturing_stdout</span>
28:     <span class="ruby-identifier">new_stdout</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
29:     <span class="ruby-identifier">$stdout</span> = <span class="ruby-identifier">new_stdout</span>
30:     <span class="ruby-keyword kw">begin</span>
31:       <span class="ruby-keyword kw">yield</span>
32:     <span class="ruby-keyword kw">ensure</span>
33:       <span class="ruby-identifier">$stdout</span> = <span class="ruby-constant">STDOUT</span>
34:     <span class="ruby-keyword kw">end</span>
35:     <span class="ruby-identifier">new_stdout</span>.<span class="ruby-identifier">string</span>
36:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="erasing-local-config-file-method" class="method-detail ">
				<a name="method-i-erasing_local_config_file"></a>

				<div class="method-heading">
				
					<span class="method-name">erasing_local_config_file</span><span
						class="method-args">(file)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Run the block with the given <em>file</em> (named by a string) deleted
before and after.
</p>
					

					
					<div class="method-source-code"
						id="erasing-local-config-file-source">
<pre>
    <span class="ruby-comment cmt"># File lib/s4t-utils/capturing-globals.rb, line 70</span>
70:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">erasing_local_config_file</span>(<span class="ruby-identifier">file</span>)
71:     <span class="ruby-identifier">with_home_right_here</span> { 
72:       <span class="ruby-keyword kw">begin</span>
73:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">file</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">file</span>)
74:         <span class="ruby-keyword kw">yield</span>
75:       <span class="ruby-keyword kw">ensure</span>
76:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">file</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">file</span>)
77:       <span class="ruby-keyword kw">end</span>
78:     }
79:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="friendly-list-method" class="method-detail ">
				<a name="method-i-friendly_list"></a>

				<div class="method-heading">
				
					<span class="method-name">friendly_list</span><span
						class="method-args">(connector, array)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Use <em>connector</em> to join <em>array</em> into a human-friendly list.
</p>
<pre>
   friendly_list(&quot;or&quot;, [1])   =&gt; &quot;'1'&quot;
   friendly_list(&quot;or&quot;), [1, 2]  =&gt; &quot;'1' or '2'&quot;
   friendly_list(&quot;or&quot;), [1, 2, 3] =&gt; &quot;'1', '2', or '3'&quot;</pre>
					

					
					<div class="method-source-code"
						id="friendly-list-source">
<pre>
    <span class="ruby-comment cmt"># File lib/s4t-utils/friendly-format.rb, line 15</span>
15:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">friendly_list</span>(<span class="ruby-identifier">connector</span>, <span class="ruby-identifier">array</span>)
16:     <span class="ruby-identifier">quoted</span> = <span class="ruby-identifier">array</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span> <span class="ruby-identifier">elt</span> <span class="ruby-operator">|</span> <span class="ruby-value str">&quot;'&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">elt</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;'&quot;</span> }
17:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">array</span>.<span class="ruby-identifier">length</span>
18:     <span class="ruby-keyword kw">when</span> <span class="ruby-value">0</span>
19:       <span class="ruby-value str">&quot;&quot;</span>
20:     <span class="ruby-keyword kw">when</span> <span class="ruby-value">1</span>
21:       <span class="ruby-identifier">quoted</span>[<span class="ruby-value">0</span>]
22:     <span class="ruby-keyword kw">when</span> <span class="ruby-value">2</span>
23:       <span class="ruby-identifier">quoted</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">+</span> <span class="ruby-node">&quot; #{connector} &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">quoted</span>[<span class="ruby-value">1</span>]
24:     <span class="ruby-keyword kw">else</span>
25:       <span class="ruby-identifier">quoted</span>[<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-value">1</span>].<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;, &quot;</span>) <span class="ruby-operator">+</span> <span class="ruby-node">&quot;, #{connector} #{quoted.last}&quot;</span>
26:     <span class="ruby-keyword kw">end</span>
27:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="pi-method" class="method-detail ">
				<a name="method-i-pi"></a>

				<div class="method-heading">
				
					<span class="method-name">pi</span><span
						class="method-args">(arg, leader=nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
A way of putting debugging statements in code that requires less typing
than <tt>puts</tt>.
</p>
<pre>
    pi [1, 2, 3], 'input'    # =&gt; 'input: [1, 2, 3]
</pre>
<p>
The <em>arg</em> is printed using <tt>inspect</tt>. If <em>leader</em>
isn&#8217;t given,  nothing is printed before <em>arg</em>. <em>leader</em>
can be a string or symbol.
</p>
<p>
pi returns its <em>arg</em>, which is occasionally useful for sticking
debugging into the middle of complicated expressions.
</p>
					

					
					<div class="method-source-code"
						id="pi-source">
<pre>
    <span class="ruby-comment cmt"># File lib/s4t-utils/hacks.rb, line 28</span>
28:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pi</span>(<span class="ruby-identifier">arg</span>, <span class="ruby-identifier">leader</span>=<span class="ruby-keyword kw">nil</span>)
29:     <span class="ruby-identifier">leader</span> = <span class="ruby-identifier">leader</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">leader</span>
30:     <span class="ruby-identifier">leader</span> = (<span class="ruby-identifier">leader</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>) <span class="ruby-operator">?</span> <span class="ruby-value str">''</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">leader</span> <span class="ruby-operator">+</span> <span class="ruby-value str">': '</span>
31:     <span class="ruby-identifier">prog1</span>(<span class="ruby-identifier">arg</span>) { <span class="ruby-identifier">puts</span> <span class="ruby-identifier">leader</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">inspect</span> }
32:    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="prog--method" class="method-detail ">
				<a name="method-i-prog1"></a>

				<div class="method-heading">
				
					<span class="method-name">prog1</span><span
						class="method-args">(retval)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
The return value of prog1 is the <em>retval</em>. Before that&#8217;s
returned, though, the <em>retval</em> is yielded to the block. This method
is an  alternative to stashing a value in a temporary, fiddling around,
then returning the temporary. Here&#8217;s an example:
</p>
<pre>
    prog1(1+1) { | s | puts &quot;Sum is #{s}.&quot;}   # =&gt; 2
</pre>
<p>
The name &#8220;prog1&#8221; is ancient Lisp jargon.
</p>
					

					
					<div class="method-source-code"
						id="prog--source">
<pre>
    <span class="ruby-comment cmt"># File lib/s4t-utils/hacks.rb, line 13</span>
13:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">prog1</span>(<span class="ruby-identifier">retval</span>)
14:     <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">retval</span>)
15:     <span class="ruby-identifier">retval</span>
16:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="symbol-safe-name-method" class="method-detail ">
				<a name="method-i-symbol_safe_name"></a>

				<div class="method-heading">
				
					<span class="method-name">symbol_safe_name</span><span
						class="method-args">(name)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Produces a version of a string that can be typed after a : (Can also be
safely given at a command-line prompt.)
</p>
					

					
					<div class="method-source-code"
						id="symbol-safe-name-source">
<pre>
    <span class="ruby-comment cmt"># File lib/s4t-utils/friendly-format.rb, line 31</span>
31:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">symbol_safe_name</span>(<span class="ruby-identifier">name</span>)
32:     <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\W/</span>, <span class="ruby-value str">''</span>)
33:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="user-claims-method" class="method-detail ">
				<a name="method-i-user_claims"></a>

				<div class="method-heading">
				
					<span class="method-name">user_claims</span><span
						class="method-args">(fact, &block)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
A StandardError is thrown if the <em>fact</em> the user claims is true is
actually false. The <em>block</em> is called to provide the exception
message.
</p>
					

					
					<div class="method-source-code"
						id="user-claims-source">
<pre>
    <span class="ruby-comment cmt"># File lib/s4t-utils/claims.rb, line 8</span>
 8:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">user_claims</span>(<span class="ruby-identifier">fact</span>, &amp;<span class="ruby-identifier">block</span>)
 9:     <span class="ruby-identifier">user_is_bewildered</span>(<span class="ruby-identifier">block</span>.<span class="ruby-identifier">call</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">fact</span>
10:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="user-denies-method" class="method-detail method-alias">
				<a name="method-i-user_denies"></a>

				<div class="method-heading">
				
					<span class="method-name">user_denies</span><span
						class="method-args">(fact, &block)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
				</div>

				

				
				<div class="aliases">
          Alias for: <a href="S4tUtils.html#method-i-user_disputes">user_disputes</a>
				</div>
				
			</div>

		
			<div id="user-disputes-method" class="method-detail ">
				<a name="method-i-user_disputes"></a>

				<div class="method-heading">
				
					<span class="method-name">user_disputes</span><span
						class="method-args">(fact, &block)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
A StandardError is thrown if the <em>fact</em> the user disputes is
nevertheless true. The <em>block</em> is called to provide the exception
message.
</p>
					

					
					<div class="method-source-code"
						id="user-disputes-source">
<pre>
    <span class="ruby-comment cmt"># File lib/s4t-utils/claims.rb, line 15</span>
15:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">user_disputes</span>(<span class="ruby-identifier">fact</span>, &amp;<span class="ruby-identifier">block</span>)
16:     <span class="ruby-identifier">user_claims</span>(<span class="ruby-operator">!</span><span class="ruby-identifier">fact</span>, &amp;<span class="ruby-identifier">block</span>)
17:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
				<div class="aliases">
					Also aliased as: <a href="S4tUtils.html#method-i-user_denies">user_denies</a>
				</div>
				

				
			</div>

		
			<div id="user-is-bewildered-method" class="method-detail ">
				<a name="method-i-user_is_bewildered"></a>

				<div class="method-heading">
				
					<span class="method-name">user_is_bewildered</span><span
						class="method-args">(msg = "How could this point be reached?")</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
An unconditional claim that the user is bewildered by something  that
should not have happened. Most usually, it&#8217;s that the code should
never have gotten to this point.
</p>
					

					
					<div class="method-source-code"
						id="user-is-bewildered-source">
<pre>
    <span class="ruby-comment cmt"># File lib/s4t-utils/claims.rb, line 23</span>
23:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">user_is_bewildered</span>(<span class="ruby-identifier">msg</span> = <span class="ruby-value str">&quot;How could this point be reached?&quot;</span>)
24:     <span class="ruby-identifier">raise</span> <span class="ruby-constant">StandardError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">msg</span>)
25:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="with-command-args-method" class="method-detail ">
				<a name="method-i-with_command_args"></a>

				<div class="method-heading">
				
					<span class="method-name">with_command_args</span><span
						class="method-args">(string)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Run the block. During execution, <em>ARGV</em>&#8217;s is set as if the 
script had been executed with <em>string</em> as its argument list. If the
block tries to exit, <a
href="S4tUtils.html#method-i-with_command_args">with_command_args</a> will
instead throw a StandardError.
</p>
					

					
					<div class="method-source-code"
						id="with-command-args-source">
<pre>
     <span class="ruby-comment cmt"># File lib/s4t-utils/capturing-globals.rb, line 96</span>
 96:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_command_args</span>(<span class="ruby-identifier">string</span>)
 97:     <span class="ruby-keyword kw">begin</span>
 98:       <span class="ruby-identifier">old_argv</span> = <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">dup</span>
 99:       <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-identifier">string</span>.<span class="ruby-identifier">split</span>)
100:       <span class="ruby-keyword kw">yield</span>
101:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">SystemExit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>
102:       <span class="ruby-identifier">replacement</span> = <span class="ruby-constant">StandardError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)
103:       <span class="ruby-identifier">replacement</span>.<span class="ruby-identifier">set_backtrace</span>(<span class="ruby-identifier">ex</span>.<span class="ruby-identifier">backtrace</span>)
104:       <span class="ruby-identifier">raise</span> <span class="ruby-identifier">replacement</span>
105:     <span class="ruby-keyword kw">ensure</span>
106:       <span class="ruby-constant">ARGV</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-identifier">old_argv</span>)
107:     <span class="ruby-keyword kw">end</span>
108:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="with-environment-vars-method" class="method-detail ">
				<a name="method-i-with_environment_vars"></a>

				<div class="method-heading">
				
					<span class="method-name">with_environment_vars</span><span
						class="method-args">(settings)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Run the block, replacing the values of environment variables with the
values given in the hash <em>settings</em>. The environment variables are
restored when the method returns.
</p>
					

					
					<div class="method-source-code"
						id="with-environment-vars-source">
<pre>
    <span class="ruby-comment cmt"># File lib/s4t-utils/capturing-globals.rb, line 41</span>
41:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_environment_vars</span>(<span class="ruby-identifier">settings</span>)
42:     <span class="ruby-keyword kw">begin</span>
43:       <span class="ruby-identifier">old</span> = {}
44:       <span class="ruby-identifier">settings</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span> <span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span> <span class="ruby-operator">|</span>
45:         <span class="ruby-identifier">old</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-constant">ENV</span>[<span class="ruby-identifier">key</span>]
46:         <span class="ruby-constant">ENV</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>
47:       }
48:       <span class="ruby-keyword kw">yield</span>
49:     <span class="ruby-keyword kw">ensure</span>
50:       <span class="ruby-identifier">settings</span>.<span class="ruby-identifier">each_key</span> { <span class="ruby-operator">|</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">|</span>
51:         <span class="ruby-constant">ENV</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">old</span>[<span class="ruby-identifier">key</span>]
52:       }
53:     <span class="ruby-keyword kw">end</span>
54:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="with-home-right-here-method" class="method-detail ">
				<a name="method-i-with_home_right_here"></a>

				<div class="method-heading">
				
					<span class="method-name">with_home_right_here</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Run the block with the <em>HOME</em> environment variable set to the 
current working directory.
</p>
					

					
					<div class="method-source-code"
						id="with-home-right-here-source">
<pre>
    <span class="ruby-comment cmt"># File lib/s4t-utils/capturing-globals.rb, line 58</span>
58:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_home_right_here</span>
59:     <span class="ruby-keyword kw">begin</span>
60:       <span class="ruby-identifier">old_home</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'HOME'</span>]
61:       <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'HOME'</span>] = <span class="ruby-value str">'.'</span>
62:       <span class="ruby-keyword kw">yield</span>
63:     <span class="ruby-keyword kw">ensure</span>
64:       <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'HOME'</span>] = <span class="ruby-identifier">old_home</span>
65:     <span class="ruby-keyword kw">end</span>
66:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="with-local-config-file-method" class="method-detail ">
				<a name="method-i-with_local_config_file"></a>

				<div class="method-heading">
				
					<span class="method-name">with_local_config_file</span><span
						class="method-args">(file, contents)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Run the block. During the execution, the contents of <em>file</em> (named
by  a string) is replaced with <em>contents</em>.
</p>
					

					
					<div class="method-source-code"
						id="with-local-config-file-source">
<pre>
    <span class="ruby-comment cmt"># File lib/s4t-utils/capturing-globals.rb, line 83</span>
83:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_local_config_file</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">contents</span>)
84:     <span class="ruby-identifier">erasing_local_config_file</span>(<span class="ruby-identifier">file</span>) <span class="ruby-keyword kw">do</span>
85:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">file</span>, <span class="ruby-value str">'w'</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">io</span> <span class="ruby-operator">|</span>
86:         <span class="ruby-identifier">io</span>.<span class="ruby-identifier">puts</span>(<span class="ruby-identifier">contents</span>.<span class="ruby-identifier">to_s</span>)
87:       <span class="ruby-keyword kw">end</span>
88:       <span class="ruby-keyword kw">yield</span>
89:     <span class="ruby-keyword kw">end</span>
90:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="with-pleasant-exceptions-method" class="method-detail ">
				<a name="method-i-with_pleasant_exceptions"></a>

				<div class="method-heading">
				
					<span class="method-name">with_pleasant_exceptions</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Typically used to wrap the execution of an entire script.  If an exception
is thrown, a terse message is printed (to $stderr) instead of a stack dump.
The message printed is gotten from the  exception.
</p>
					

					
					<div class="method-source-code"
						id="with-pleasant-exceptions-source">
<pre>
    <span class="ruby-comment cmt"># File lib/s4t-utils/error-handling.rb, line 9</span>
 9:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_pleasant_exceptions</span>
10:     <span class="ruby-keyword kw">yield</span>
11:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">SystemExit</span>
12:     <span class="ruby-identifier">raise</span>
13:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>
14:     <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span>(<span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>)
15:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="with-stdin-method" class="method-detail ">
				<a name="method-i-with_stdin"></a>

				<div class="method-heading">
				
					<span class="method-name">with_stdin</span><span
						class="method-args">(string)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="with-stdin-source">
<pre>
     <span class="ruby-comment cmt"># File lib/s4t-utils/capturing-globals.rb, line 110</span>
110:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_stdin</span>(<span class="ruby-identifier">string</span>)
111:     <span class="ruby-identifier">old_stdin</span> = <span class="ruby-identifier">$stdin</span>
112:     <span class="ruby-identifier">$stdin</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">string</span>)
113:     <span class="ruby-keyword kw">yield</span>
114:   <span class="ruby-keyword kw">ensure</span>
115:     <span class="ruby-identifier">$stdin</span> = <span class="ruby-identifier">old_stdin</span>
116:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="without-pleasant-exceptions-method" class="method-detail ">
				<a name="method-i-without_pleasant_exceptions"></a>

				<div class="method-heading">
				
					<span class="method-name">without_pleasant_exceptions</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
<a
href="S4tUtils.html#method-i-with_pleasant_exceptions">with_pleasant_exceptions</a>
swallows the stack trace, which you want to see during debugging. The easy
way to see it is to add &#8216;out&#8217; to that message, producing this
one. To reduce the chance you&#8217;ll forget to make exceptions pleasant
again, a note that  exceptions are turned off is always printed to $stderr.
</p>
					

					
					<div class="method-source-code"
						id="without-pleasant-exceptions-source">
<pre>
    <span class="ruby-comment cmt"># File lib/s4t-utils/error-handling.rb, line 22</span>
22:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">without_pleasant_exceptions</span>
23:     <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Note: exception handling turned off.&quot;</span>
24:     <span class="ruby-keyword kw">yield</span>
25:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	
		<div id="private-instance-method-details" class="method-section section">
			<h3 class="section-header">Private Instance Methods</h3>

		
			<div id="set-script-lib-path-method" class="method-detail ">
				<a name="method-i-set_script_lib_path"></a>

				<div class="method-heading">
				
					<span class="method-name">set_script_lib_path</span><span
						class="method-args">(given)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
If the <em>given</em> file lives as a script inside a typical Ruby
development  structure, put ../lib at the front of the path. That includes
files from there in preference to old gems lying around. 
</p>
					

					
					<div class="method-source-code"
						id="set-script-lib-path-source">
<pre>
    <span class="ruby-comment cmt"># File lib/s4t-utils/os.rb, line 47</span>
47:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_script_lib_path</span>(<span class="ruby-identifier">given</span>) 
48:     <span class="ruby-identifier">path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">given</span>)
49:     <span class="ruby-identifier">p</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span> <span class="ruby-identifier">x</span> <span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">path</span>), <span class="ruby-value str">'..'</span>, <span class="ruby-identifier">x</span>) }
50:     <span class="ruby-identifier">l</span> = <span class="ruby-identifier">p</span>[<span class="ruby-value str">'lib'</span>]
51:     <span class="ruby-identifier">t</span> = <span class="ruby-identifier">p</span>[<span class="ruby-value str">'test'</span>]
52:     <span class="ruby-identifier">s</span> = <span class="ruby-identifier">p</span>[<span class="ruby-value str">'setup.rb'</span>]
53:     <span class="ruby-identifier">$:</span>.<span class="ruby-identifier">unshift</span>(<span class="ruby-identifier">l</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">l</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">t</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">s</span>)
54:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="set-test-paths-method" class="method-detail ">
				<a name="method-i-set_test_paths"></a>

				<div class="method-heading">
				
					<span class="method-name">set_test_paths</span><span
						class="method-args">(given)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Find and set the paths a test needs to run, given the normal Ruby directory
structure. <em>given</em> is something below the test directory.
PACKAGE_ROOT becomes the root of  the structure. PACKAGE_ROOT/lib and
PACKAGE_ROOT itself are put on the front of the path (the latter is so that
tests can require &#8216;test/something&#8217;.
</p>
					

					
					<div class="method-source-code"
						id="set-test-paths-source">
<pre>
    <span class="ruby-comment cmt"># File lib/s4t-utils/os.rb, line 33</span>
33:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_test_paths</span>(<span class="ruby-identifier">given</span>)
34:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">S4tUtils</span>.<span class="ruby-identifier">const_defined?</span>(<span class="ruby-value str">&quot;PACKAGE_ROOT&quot;</span>)
35: 
36:     <span class="ruby-identifier">path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">given</span>)
37:     <span class="ruby-identifier">i</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">&quot;/test/&quot;</span>)
38:     <span class="ruby-constant">S4tUtils</span>.<span class="ruby-identifier">const_set</span>(<span class="ruby-value str">&quot;PACKAGE_ROOT&quot;</span>, <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">i</span>])
39:     <span class="ruby-identifier">$:</span>.<span class="ruby-identifier">unshift</span>(<span class="ruby-node">&quot;#{PACKAGE_ROOT}/lib&quot;</span>)
40:     <span class="ruby-identifier">$:</span>.<span class="ruby-identifier">unshift</span>(<span class="ruby-node">&quot;#{PACKAGE_ROOT}&quot;</span>)
41:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

